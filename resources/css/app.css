/* =====================
   Root / Base
===================== */
:root{
  --bg:#eef2f7;
  --card:#ffffff;
  --ink:#1f2937;
  --muted:#6b7280;
  --primary:#3b82f6;
  --primary-press:#2563eb;
  --ring:rgba(59,130,246,.22);
}

html, body { height: 100%; overflow: hidden; }
body{
  font-family:system-ui,-apple-system,Segoe UI,Arial,sans-serif;
  color:var(--ink);
  background:
    radial-gradient(1200px 800px at 80% -100px,#e8f2ff 0%,rgba(232,242,255,0) 60%),
    radial-gradient(900px 600px at -100px 120%,#ffeede 0%,rgba(255,238,222,0) 60%),
    var(--bg);
}

/* =====================
   Generic UI Parts
===================== */
.input,.pw-input{
  width:100%;box-sizing:border-box;font-size:14px;padding:11px 12px;
  border:1px solid #d7dde5;border-radius:12px;background:#fff;
  transition:border-color .12s ease,box-shadow .12s ease,background .12s ease
}
.input:focus,.pw-input:focus{outline:none;border-color:#a8c5ff;box-shadow:0 0 0 5px var(--ring)}
.btn{
  width:100%;padding:12px 14px;border:0;border-radius:12px;
  background:linear-gradient(180deg,var(--primary) 0%,var(--primary-press) 100%);
  color:#fff;font-weight:700;font-size:15px;cursor:pointer;
  box-shadow:0 10px 22px rgba(59,130,246,.35);
  transition:transform .06s ease,filter .06s ease,box-shadow .06s ease
}
.btn:hover{filter:brightness(.98)}
.btn:active{transform:translateY(1px);box-shadow:0 6px 16px rgba(59,130,246,.3)}
.status,.errors{margin-bottom:12px;font-size:13px}
.status{color:#0b7}.errors{color:#e11d48}
.links{margin-top:12px;text-align:center;font-size:13px}
.links a{color:var(--primary);text-decoration:none}
.links a:hover{text-decoration:underline}

/* =====================
   Brand Header
===================== */
.app-header{position:relative;text-align:center;margin:46px 0 10px;padding-top:0}
.app-brand{
  display:inline-flex;align-items:center;gap:12px;padding:10px 16px;background:rgba(255,255,255,.9);
  border:1px solid rgba(0,0,0,.04);border-radius:999px;box-shadow:0 10px 30px rgba(15,23,42,.08);
  backdrop-filter:saturate(120%) blur(6px)
}
.brand-badge{width:36px;height:36px;border-radius:50%;display:grid;place-items:center;background:linear-gradient(135deg,#60a5fa 0%,#34d399 100%);color:#fff;font-weight:800}
.app-title-text{font-weight:800;letter-spacing:.02em}
.app-subtitle{font-size:13px;color:var(--muted);margin-top:8px}

/* 左上の控えめユーザー情報 */
.user-info{position:absolute;top:10px;left:12px;font-size:12px;color:var(--muted);text-align:left}
.logout-btn{padding:4px 8px;border:1px solid rgba(0,0,0,.08);background:#fff;border-radius:6px;font-size:12px;cursor:pointer}

/* =====================
   Login
===================== */
.login-wrap{display:flex;justify-content:center;padding:24px 16px 72px}
.login-card{
  width:100%;max-width:460px;background:rgba(255,255,255,.92);
  border:1px solid rgba(0,0,0,.04);border-radius:16px;padding:26px 24px;
  box-shadow:0 20px 40px rgba(15,23,42,.10);backdrop-filter:saturate(120%) blur(4px);
  transition:transform .12s ease,box-shadow .12s ease
}
.login-card:hover{transform:translateY(-1px);box-shadow:0 26px 48px rgba(15,23,42,.12)}
.login-card h2{font-size:22px;margin:0 0 18px}
.form-row{margin-bottom:14px}
.form-row label{display:block;font-weight:600;font-size:14px;margin-bottom:6px}
.pw-row{display:flex;gap:8px;align-items:center}
.pw-toggle{
  display:inline-block;width:64px;text-align:center;padding:11px 0;border:1px solid #d7dde5;border-radius:12px;
  background:linear-gradient(180deg,#f9fafb 0%,#f3f4f6 100%);font-size:13px;cursor:pointer;user-select:none
}
.footer-note{text-align:center;color:var(--muted);font-size:12px}

/* =====================
   Layout / Common
===================== */
.page{max-width:1280px;margin:0 auto;padding:0 24px 56px}
.board-header{flex:0 0 auto}
.board-header h2{font-size:22px;font-weight:700;margin:0 0 8px}
.board-actions{display:flex;justify-content:center;margin:6px 0 18px}
.create-btn{
  padding:10px 14px;background:var(--primary);color:#fff;border:none;border-radius:10px;font-size:14px;font-weight:600;cursor:pointer;
  box-shadow:0 4px 12px rgba(59,130,246,.25)
}
.create-btn:hover{background:var(--primary-press)}
.board-list{display:flex;flex-direction:column;gap:12px}
.board-item{
  padding:14px 16px;background:#fff;border:1px solid rgba(0,0,0,.06);border-radius:12px;box-shadow:0 2px 6px rgba(0,0,0,.05);
  transition:box-shadow .12s ease,transform .12s ease
}
.board-item:hover{transform:translateY(-2px);box-shadow:0 6px 14px rgba(0,0,0,.08)}
.board-item a{font-weight:600;color:var(--primary);text-decoration:none;font-size:15px;line-height:1.4}
.board-meta{margin-top:4px;font-size:13px;color:var(--muted);line-height:1.35}
.user-bar{margin:8px 0 10px;font-size:14px;color:var(--muted);display:flex;align-items:center;gap:10px}

/* =====================
   Board Show
===================== */
.board-show-head{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;margin:18px 0 14px}
.board-title{font-size:22px;font-weight:700;margin:0}
.danger-btn{
  padding:10px 12px;border:0;border-radius:10px;cursor:pointer;color:#fff;
  background:linear-gradient(180deg,#ef4444 0%,#dc2626 100%);box-shadow:0 6px 16px rgba(239,68,68,.25)
}
.danger-btn:hover{filter:brightness(.98)}
.board-links{margin-top:6px}
.empty{color:#666;font-size:14px}

.board-page{height:100vh;display:grid;grid-template-rows:auto 1fr;overflow:hidden}
.board-grid{min-height:0;display:grid;grid-template-columns:minmax(900px,1fr) 360px;gap:24px;align-items:start}

/* Feed */
.feed{
  min-height:0;height:calc(100% - 24px);overflow:auto;position:relative;
  padding-right:12px;padding-bottom:56px;
  background:#e1efe5;border-radius:12px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.03)
}

/* Feed FAB */
.feed-fab-wrap{position:sticky;bottom:12px;display:flex;justify-content:flex-end;height:0;pointer-events:none;z-index:5}
.feed-fab{
  pointer-events:auto;width:40px;height:40px;border-radius:999px;border:1px solid rgba(0,0,0,.12);
  background:rgba(30,64,175,.10);color:#1e40af;font-size:18px;font-weight:800;display:grid;place-items:center;
  box-shadow:0 6px 16px rgba(0,0,0,.08);opacity:.9;transition:opacity .15s,transform .06s
}
.feed-fab:hover{opacity:.9}.feed-fab:active{transform:translateY(1px)}.feed-fab.is-hidden{display:none}

/* Messages */
.msg-list{list-style:none;margin:0;padding:0 12px;display:flex;flex-direction:column;gap:14px}
.msg{max-width:80%;padding:10px 12px;border-radius:12px;box-shadow:0 1px 2px rgba(0,0,0,.06);background:#ffffffcc;border:1px solid rgba(0,0,0,.04)}
.msg.theirs{align-self:flex-start;background:#ffffff}
.msg.mine{align-self:flex-end;background:#dbecff}
.msg-head{display:flex;gap:8px;font-size:16px;color:#667085;margin:0}
.msg-user{font-weight:600}
.msg-body{white-space:pre-wrap;word-break:break-word;margin:0}
.msg-text{margin:0}
.msg-image{margin-top:8px;max-width:320px;border-radius:8px;display:block}
.msg-actions{margin-top:8px;text-align:right}
.msg-delete{font-size:12px;color:#b21c1c;background:#fff;border:1px solid #e5e7eb;padding:4px 8px;border-radius:6px}

/* Sidebar / Post form */
.sidebar{
  position:sticky;top:20px;
  max-height:calc(100vh - 20px - 24px); /* 画面高 - sticky余白 - ページ下パディング */
  overflow:auto;-webkit-overflow-scrolling:touch
}
.post-card{width:100%;box-sizing:border-box;padding:16px;border-radius:12px;background:#fff;box-shadow:0 1px 4px rgba(0,0,0,.08)}
.post-card-title{font-size:18px;font-weight:700;margin:0 0 6px}
.post-card-meta{font-size:12px;color:#666;margin-bottom:10px}
.form-label{display:block;font-size:12px;color:#555;margin:10px 0 6px}
.form-textarea{width:100%;max-width:100%;box-sizing:border-box;display:block}
.form-file{display:block;width:100%;margin:6px 0 12px}
.primary-btn{display:inline-block;padding:10px 14px;border-radius:10px;border:none;background:#2563eb;color:#fff;font-weight:600;cursor:pointer}
.primary-btn:hover{filter:brightness(.98)}

/* Common cards / links */
.section{background:#fff;border:1px solid rgba(0,0,0,.06);border-radius:12px;padding:16px;box-shadow:0 2px 6px rgba(0,0,0,.05);margin-bottom:14px}
.section h3{font-size:18px;margin:0 0 10px}
.back-link{display:inline-block;margin-top:10px;font-size:13px;color:var(--primary);text-decoration:none}
.back-link:hover{text-decoration:underline}

/* =====================
   Responsive (kept behaviour, consolidated)
===================== */

/* iOS 100svh 対応 */
@supports (height: 100svh) { .board-page { height: 100svh; } }

/* 1280px 未満で右ペインを少し絞る */
@media (max-width:1280px){
  .board-grid{grid-template-columns:minmax(760px,1fr) 340px}
}

/* タブレット以下：1カラム＋feedが残り高を使う */
@media (max-width:1023px){
  .board-page{height:100vh}
  @supports (height:100svh){ .board-page{height:100svh} }

  .board-grid{display:flex;flex-direction:column;min-height:0;gap:16px}
  .feed{
    flex:1 1 auto;min-height:0;height:auto;overflow:auto;
    padding-right:8px;padding-bottom:68px
  }
  .feed-fab-wrap{bottom:16px}
  .feed-fab{width:44px;height:44px}
  .sidebar{position:static;width:100%;top:auto;max-height:none;overflow:visible}
  .post-card{width:100%}
  .form-textarea{width:100%;max-width:100%}
}

/* 画面が狭い/低い時はページ全体スクロールに切替（フォーム下切れ防止） */
@media (max-width:1200px), (max-height:740px){
  html, body { height:auto; overflow:auto; }
  .board-page{height:auto;overflow:visible;grid-template-rows:auto auto}
  .board-grid{grid-template-columns:1fr;gap:16px;min-height:unset}
  .feed{height:auto;max-height:none;padding-bottom:24px}
  .sidebar{position:static;max-height:none;overflow:visible}
  .post-card{width:100%;box-sizing:border-box}
}
